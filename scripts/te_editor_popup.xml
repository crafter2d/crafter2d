<?xml version="1.0" ?>
<menu id="1" name="te_world_popup">
    <eventhandlers>
        <eventhandler name="onClick">
            <code>if id == 0 then&#x0A; local dialog = guimanager:loadFromXML(&quot;te_newworld&quot;)&#x0A; if dialog:doModal() == -1 then&#x0A;   return&#x0A; end&#x0A;&#x0A; chkIso = tolua.cast(dialog:findChildByName(&quot;chkIso&quot;), &quot;GuiCheckBox&quot;)&#x0A; local newworld = World:new()&#x0A; newworld:createEmpty(dialog:findChildByName(&quot;te_newworld_name&quot;):getCaption())&#x0A; if chkIso:isChecked() then&#x0A; newworld:setLayerType(EIsoDiamond)&#x0A; else&#x0A; newworld:setLayerType(ETopDown)&#x0A; end&#x0A;&#x0A; te_edit:world(newworld)&#x0A; te_edit:setActiveLayer(-1)&#x0A; te_images:world(newworld)&#x0A; te_images:setActiveLayer(-1)&#x0A; te_layers:removeAll()&#x0A; te_selection = 0&#x0A; te_world = newworld&#x0A;elseif id == 1 then&#x0A; if te_world ~= nil then&#x0A; te_world:save()&#x0A; end&#x0A;elseif id == 3 then&#x0A; if te_world ~= nil then&#x0A; te_world:destroy()&#x0A; end&#x0A;&#x0A; local dialog = guimanager:loadFromXML(&quot;openfile&quot;)&#x0A; if dialog:doModal() == 0 then&#x0A; local edit = dialog:findChildByName(&quot;edtFile&quot;)&#x0A; te_world = World:new()&#x0A; te_world:create(edit:getCaption())&#x0A; te_edit:world(te_world)&#x0A; te_images:world(te_world)&#x0A;&#x0A; te_layers:removeAll()&#x0A; local count = te_world:getLayerCount()&#x0A; for i=0, count-1 do&#x0A; local layer = te_world:getLayer(i)&#x0A; te_layers:addString(layer:getName())&#x0A; end&#x0A; end&#x0A;elseif id == 4 then&#x0A; -- bounds mode&#x0A; editor:setMode(EDIT_MODE_BOUND)&#x0A;elseif id == 5 then&#x0A; -- tile edit mode&#x0A; editor:setMode(EDIT_MODE_TILE)&#x0A;elseif id == 6 then&#x0A; -- object edit mode&#x0A; editor:setMode(EDIT_MODE_OBJECT)&#x0A;elseif id == 7 then&#x0A; Object_createSoundEffect(editor:getContextPosition(), te_world)&#x0A;elseif id == 8 then&#x0A; Object_createCharacter(editor:getContextPosition(), te_world)&#x0A;end&#x0A;</code>
        </eventhandler>
    </eventhandlers>
    <menuitems>
        <item id="0" text="New" />
        <item id="3" text="Load" />
        <item id="1" text="Save" />
        <item id="4" text="Bound Mode" />
        <item id="5" text="Tile Mode" />
        <item id="6" text="Object Mode" />
        <item id="2" text="Close" />
        <item id="7" text="Sound Effect" />
        <item id="8" text="Character" />
    </menuitems>
</menu>
